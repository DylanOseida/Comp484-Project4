<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSUN Map Challenge</title>
    
    <!-- Link to Google Maps API, replace 'YOUR_API_KEY' with your actual API key -->
    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap" async defer></script>
    
</head>

<body>

    <h1>CSUN Map Challenge</h1>
    <p>Double-click on the map to indicate the location you think is correct.</p>

    <!-- Map container -->
    <div id="map"></div>

    <script>
        let map;
        let correctAnswers = 0;
        let questionsAnswered = 0;

        // The correct CSUN location (replace with the actual target location)
        const targetLat = 34.237;  // Correct latitude for CSUN
        const targetLng = -118.530;  // Correct longitude for CSUN

        // Initialize the map
        function initMap() {
            // CSUN coordinates
            const csunLocation = { lat: targetLat, lng: targetLng };

            // Create a new map centered on CSUN location
            map = new google.maps.Map(document.getElementById('map'), {
                center: csunLocation,
                zoom: 15,  // Zoom level
                disableDefaultUI: true  // Disable all controls (zoom, etc.)
            });

            // Add event listener for double-click
            google.maps.event.addListener(map, 'dblclick', function(event) {
                const clickedLocation = event.latLng;
                const userLat = clickedLocation.lat();
                const userLng = clickedLocation.lng();

                // Check if the user clicked the correct location
                checkLocation(userLat, userLng);
            });
        }

        // Function to check if the clicked location is close enough to the target location
        function checkLocation(userLat, userLng) {
            const tolerance = 0.01;  // Latitude and longitude tolerance

            if (Math.abs(userLat - targetLat) < tolerance && Math.abs(userLng - targetLng) < tolerance) {
                correctAnswers++;
                alert("Correct! You found the location!");

                // Show the correct location on the map (green marker)
                new google.maps.Marker({
                    position: { lat: targetLat, lng: targetLng },
                    map: map,
                    title: "Correct location!",
                    icon: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"  // Green marker
                });
            } else {
                alert("Incorrect! Try again.");

                // Optionally, highlight the correct location in red
                new google.maps.Marker({
                    position: { lat: targetLat, lng: targetLng },
                    map: map,
                    title: "Correct location!",
                    icon: "http://maps.google.com/mapfiles/ms/icons/red-dot.png"  // Red marker
                });
            }

            // Track the number of questions answered
            questionsAnswered++;

            // After 5 questions, show the score
            if (questionsAnswered >= 5) {
                alert(`You got ${correctAnswers} out of 5 correct!`);
            }
        }
    </script>

</body>
</html>
